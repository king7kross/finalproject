<h2 class="section-title">Top 5 Products (by Orders)</h2>

<div class="toolbar">
  <label class="field">
    <span class="field-label">Year</span>
    <select class="select" [(ngModel)]="year" (change)="fetch()">
      <option *ngFor="let y of years" [value]="y">{{ y }}</option>
    </select>
  </label>

  <label class="field">
    <span class="field-label">Month</span>
    <select class="select" [(ngModel)]="month" (change)="fetch()">
      <option *ngFor="let m of months" [value]="m.value">{{ m.label }}</option>
    </select>
  </label>

  <button class="btn btn-primary" (click)="fetch()" [disabled]="loading">Refresh</button>

  <span class="loading-pill" *ngIf="loading">
    <span class="dot"></span> Loadingâ€¦
  </span>
</div>

<div *ngIf="!loading && data.length === 0" class="empty-state">
  No data for the selected period.
</div>

<div class="table-card" *ngIf="!loading && data.length > 0">
  <table class="table">
    <thead>
      <tr>
        <th class="col-rank">#</th>
        <th>Product</th>
        <th class="col-qty">Total Quantity</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let row of data; let i = index">
        <td class="col-rank">
          <span class="rank-badge">{{ i + 1 }}</span>
        </td>
        <td class="product-cell">{{ row.productName }}</td>
        <td class="col-qty">{{ row.totalQuantity }}</td>
      </tr>
    </tbody>
  </table>
</div>
